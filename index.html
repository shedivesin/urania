<!doctype html>
<meta charset=utf-8>
<title>Urania</title>
<style>td{line-height:1rem;padding-right:1em}tr>:last-child{padding-right:0}</style>

<table>
<tr><td>Sun<td id=sun>
<tr><td>Moon<td id=moon>
<tr><td>Mercury<td id=mercury>
<tr><td>Venus<td id=venus>
<tr><td>Mars<td id=mars>
<tr><td>Jupiter<td id=jupiter>
<tr><td>Saturn<td id=saturn>
<tr><td>Ascendant<td id=ascendant>
<tr><td>Midheaven<td id=midheaven>
</table>

<script src=urania.js></script>
<script>
function print(longitude) {
  const t = Math.round(longitude * 60) % 21600;
  const minute = t % 60;
  const degree = Math.floor(t / 60) % 30;
  const zodiac = Math.floor(t / 1800);
  return degree.toString().padStart(2, "0") +
    String.fromCharCode(8202, 9800 + zodiac, 65038, 8202) +
    minute.toString().padStart(2, "0");
}

function update(date, lat, lon) {
  for(const [planet, longitude] of Object.entries(planets(date))) {
    document.getElementById(planet).innerHTML = print(longitude);
  }
  for(const [angle, longitude] of Object.entries(angles(date, lat, lon))) {
    document.getElementById(angle).innerHTML = print(longitude);
  }
}

update(Date.now(), 39.7, -105.0);
</script>
